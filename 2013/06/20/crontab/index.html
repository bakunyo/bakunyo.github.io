<!DOCTYPE html><html lang="ja" data-reactroot=""><head><title data-react-helmet="true">crontab使い方まとめ。 - BAKUNOTE</title><meta data-react-helmet="true" name="description" content="crontab使い方まとめ。 linuxに関する記事。bakunyoの技術ノート。ruby, javascriptに関することやその他日々の記録です。"/><link data-react-helmet="true" rel="canonical" href="https://blog.bakunyo.com/2013/06/20/crontab/"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><style type="text/css" data-styled-components="bQBzOM gAcxQP hPFOEi xdcaP fnLceh kLFjEU" data-styled-components-is-local="true">/* sc-component-id: twitter__Styles-ixfWcN */

.hPFOEi a.button{display:block;padding:0.5rem 1rem;color:#fefefe;background:#1583cc;width:3rem;text-align:center;border-radius:0.2rem;font-size:0.9rem;}.hPFOEi a.button svg{font-size:1.5rem;}
/* sc-component-id: styles__Styles-fSGoRn */

.xdcaP h1{font-size:1.5rem;font-size:1.5rem;}@media (min-width:750px){.xdcaP h1{font-size:2.5rem;}}.xdcaP .postInfo{background:#f3f3f3;padding:1rem;}@media (min-width:750px){.xdcaP .postInfo{margin-bottom:3rem;}}@media (max-width:750px){.xdcaP .postInfo{margin-bottom:1rem;}}@media (max-width:360px){.xdcaP .postInfo{margin-bottom:1rem;}}.xdcaP .socialButtons{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (min-width:750px){.xdcaP .socialButtons{display:none;}}.xdcaP .socialButtons div,.xdcaP .socialButtons iframe{margin-right:0.5rem;}.xdcaP .postContent{margin-bottom:5rem;}@media (min-width:750px){.xdcaP .postContent h2{font-size:1.8rem;margin-top:4rem;}.xdcaP .postContent h3{font-size:1.6rem;margin-top:3rem;}.xdcaP .postContent h4{font-size:1.4rem;margin-top:2rem;}.xdcaP .postContent h5{font-size:1.3rem;}}@media (max-width:750px){.xdcaP .postContent h2{font-size:1.3rem;margin-top:3rem;}.xdcaP .postContent h3{font-size:1.2rem;margin-top:2rem;}.xdcaP .postContent h4{font-size:1.1rem;margin-top:1.5rem;}.xdcaP .postContent h5{font-size:1rem;}}@media (max-width:360px){.xdcaP .postContent h2{font-size:1.3rem;margin-top:3rem;}.xdcaP .postContent h3{font-size:1.2rem;margin-top:2rem;}.xdcaP .postContent h4{font-size:1.1rem;margin-top:1.5rem;}.xdcaP .postContent h5{font-size:1rem;}}.xdcaP .postContent ul.tags{margin:0.5rem 0;}.xdcaP .postContent h2{padding-bottom:0.5rem;border-bottom:1px #ccc solid;}.xdcaP .postContent blockquote{font-size:1.3rem;font-style:italic;color:#aaa;border-top:1px #ccc solid;border-bottom:1px #ccc solid;width:95%;margin:2.5rem 0;}.xdcaP .postContent pre{margin:2rem 0;}@media (max-width:750px){.xdcaP .postContent pre{width:95vw;overflow:scroll;}}@media (max-width:360px){.xdcaP .postContent pre{width:95vw;overflow:scroll;}}.xdcaP .postContent pre div.file{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.xdcaP .postContent pre div.file div.text{padding:0.3rem 0.6rem;font-size:0.8rem;background:#555;border-radius:0.2rem 0.2rem 0 0;color:#ffffff;}.xdcaP .postContent pre code{padding:1.2rem;}.xdcaP .postContent p > code{background:#eaeaea;padding:0 0.4rem;border-radius:0.1rem;}.xdcaP .postContent table{border-collapse:collapse;}@media (max-width:750px){.xdcaP .postContent table{table-layout:fixed;width:95vw;}}@media (max-width:360px){.xdcaP .postContent table{table-layout:fixed;width:95vw;}}.xdcaP .postContent table th,.xdcaP .postContent table td{overflow:auto;}.xdcaP .postContent table th[style="text-align:right"]{display:none;}.xdcaP .postContent table td[style="text-align:right"]{text-align:left !important;}.xdcaP .postContent table th{background:#555;color:#fff;border:1px #ccc solid;padding:1rem 0.8rem;}.xdcaP .postContent table td{border:1px #ccc solid;padding:0.8rem;}.xdcaP .postContent ul,.xdcaP .postContent ol{font-size:1.1rem;}.xdcaP .postContent ul li,.xdcaP .postContent ol li{margin-bottom:0.3rem;}.xdcaP .postContent hr{margin:3rem 0;}.xdcaP .postContent p{font-size:1.1rem;}.xdcaP .postContent img{margin:2rem 0;box-shadow:0px 5px 15px -5px rgba(0,0,0,0.8);}.xdcaP .postContent a{word-break:break-all;}.xdcaP .postContent .cstmreba{margin:2rem 0;}.xdcaP .postContent .cstmreba .kaerebalink-box{border:1px #ccc solid;background:#ececec;padding:1.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.xdcaP .postContent .cstmreba .kaerebalink-box .kaerebalink-info{margin-left:2rem;}.xdcaP .postContent .cstmreba .kaerebalink-box .kaerebalink-info .kaerebalink-name > a{font-size:1.2rem;}.xdcaP .postContent .cstmreba .kaerebalink-box img{margin:0;}.xdcaP .postContent twitter-widget{width:95vw !important;}
/* sc-component-id: styles-hgefyM */

.gAcxQP{margin-top:2.5rem;width:8rem;position:relative;}@media (max-width:750px){.gAcxQP{display:none;}}@media (max-width:360px){.gAcxQP{display:none;}}.gAcxQP .socialLinks{position:-webkit-sticky;position:sticky;top:2rem;}.gAcxQP .socialLinks div,.gAcxQP .socialLinks iframe{margin-bottom:0.5rem;}
/* sc-component-id: styles-fIyXIQ */

.fnLceh{width:8rem;}@media (max-width:750px){.fnLceh{display:none;}}@media (max-width:360px){.fnLceh{display:none;}}
/* sc-component-id: Header__Styles-jQxfpP */

.bQBzOM header{width:100%;background:#333333;color:#fff;border-bottom:1px #aaa solid;text-align:center;cursor:pointer;}@media (min-width:750px){.bQBzOM header{margin-bottom:1rem;}}.bQBzOM header a{color:#ffffff;}.bQBzOM header h1{font-weight:normal;margin-bottom:0.3rem;margin-top:0;}@media (min-width:750px){.bQBzOM header h1{font-size:2.5rem;padding-top:1rem;}}@media (max-width:750px){.bQBzOM header h1{font-size:1.8rem;padding-top:0.5rem;}}@media (max-width:360px){.bQBzOM header h1{font-size:1.8rem;padding-top:0.5rem;}}.bQBzOM header p{margin-top:0;}@media (min-width:750px){.bQBzOM header p{margin-bottom:1rem;}}@media (max-width:750px){.bQBzOM header p{font-size:0.8rem;margin-bottom:0.5rem;}}@media (max-width:360px){.bQBzOM header p{font-size:0.8rem;margin-bottom:0.5rem;}}
/* sc-component-id: Footer__Styles-fSAnuS */

.kLFjEU footer{margin-top:1rem;padding:1rem;background:#eee;text-align:center;}.kLFjEU footer nav{margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:2rem;}.kLFjEU footer nav section{text-align:left;margin:0 2rem 1rem 0;-webkit-flex:1;-ms-flex:1;flex:1;}.kLFjEU footer nav section.profile div.self{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:1rem;}.kLFjEU footer nav section.profile div.self svg{height:1.5rem;width:1.5rem;}.kLFjEU footer nav section.profile div.self img{width:6rem;height:6rem;border-radius:3rem;}.kLFjEU footer nav section.profile div.self p{margin:0 0 0 1rem;}.kLFjEU footer nav section.links ul.tags{margin:0.6rem 0;}.kLFjEU footer nav section.links ul.tags li{margin-left:0.2rem;}@media (max-width:750px){.kLFjEU footer nav{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media (max-width:360px){.kLFjEU footer nav{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}.kLFjEU footer .footerSmalls span,.kLFjEU footer .footerSmalls a{margin:0 0.2rem;}
</style><style type="text/css" data-styled-components="" data-styled-components-is-local="false">/* sc-component-id: sc-global-389450559 */
body{font-family:-apple-system,Hiragino Kaku Gothic ProN,BlinkMacSystemFont,"Helvetica Neue","Segoe UI","Noto Sans Japanese","ヒラギノ角ゴ ProN W3",Meiryo,sans-serif;font-weight:400;font-size:18px;margin:0;padding:0;color:#222;}
</style><style type="text/css" data-styled-components="gReZKP" data-styled-components-is-local="true">/* sc-component-id: styles-cxyjNX */

.gReZKP a{text-decoration:none;}.gReZKP .content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;}@media (min-width:750px){.gReZKP main,.gReZKP nav{width:700px;}}.gReZKP main{padding:0 0.5rem;}.gReZKP img{max-width:100%;}.gReZKP .postInfo .postMeta{margin-right:3rem;}.gReZKP .postInfo .postMeta p{margin:0.5rem 0;}.gReZKP .meta{color:#555;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.gReZKP .meta svg{margin-right:0.5rem;}.gReZKP .meta ul{margin:0;}.gReZKP ul.tags{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style:none;padding-left:0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.gReZKP ul.tags li{font-size:0.9rem;background:#2199e8;margin:0.2rem;color:#ffffff;padding:0.2rem 0.5rem;border-radius:0.1rem;cursor:pointer;}.gReZKP ul.tags li:first-child{margin-left:0;}.gReZKP ul.tags li:hover{background:#008cba;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}
</style><link rel="icon" href="https://blog.bakunyo.com/favicon.ico"/><link rel="alternate" type="application/rss+xml" href="https://blog.bakunyo.com/rss" title="RSS2.0"/><meta name="theme-color" content="#333333"/><meta name="google-site-verification" content="TIEG3i45Tk7IaRrKnwB69GBid55VwIZwcvkRQRAakgY"/></head><body><div id="root"><div class="styles-cxyjNX gReZKP" data-reactroot=""><div class="Header__Styles-jQxfpP bQBzOM"><header><a href="https://blog.bakunyo.com/"><h1>BAKUNOTE</h1><p>bakunyoの技術ノート</p></a></header></div><div class="content"><div class="styles-hgefyM gAcxQP"><div class="socialLinks"><div class="twitter__Styles-ixfWcN hPFOEi"><a class="button" href="#"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z"></path></g></svg>Tweet</a></div><a href="httpb.hatena.ne.jp/entry/httpblog.bakunyo.com/2013/06/20/crontab" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-large" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border:none"/></a><a data-pocket-label="pocket" data-pocket-count="vertical" class="pocket-btn" data-lang="ja"></a></div></div><main class="styles__Styles-fSGoRn xdcaP"><h1>crontab使い方まとめ。</h1><div class="postInfo"><div class="postMeta"><div class="meta"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m4.4 37.1h6.4v-6.4h-6.4v6.4z m7.8 0h7.2v-6.4h-7.2v6.4z m-7.8-7.8h6.4v-7.2h-6.4v7.2z m7.8 0h7.2v-7.2h-7.2v7.2z m-7.8-8.6h6.4v-6.4h-6.4v6.4z m16.4 16.4h7.1v-6.4h-7.1v6.4z m-8.6-16.4h7.2v-6.4h-7.2v6.4z m17.2 16.4h6.4v-6.4h-6.4v6.4z m-8.6-7.8h7.1v-7.2h-7.1v7.2z m-7.9-19.3v-6.4q0-0.3-0.2-0.5t-0.5-0.2h-1.4q-0.3 0-0.5 0.2t-0.2 0.5v6.4q0 0.3 0.2 0.5t0.5 0.2h1.4q0.3 0 0.5-0.2t0.2-0.5z m16.5 19.3h6.4v-7.2h-6.4v7.2z m-8.6-8.6h7.1v-6.4h-7.1v6.4z m8.6 0h6.4v-6.4h-6.4v6.4z m0.7-10.7v-6.4q0-0.3-0.2-0.5t-0.5-0.2h-1.5q-0.3 0-0.5 0.2t-0.2 0.5v6.4q0 0.3 0.2 0.5t0.5 0.2h1.5q0.2 0 0.5-0.2t0.2-0.5z m8.5-1.4v28.5q0 1.2-0.8 2.1t-2 0.8h-31.4q-1.2 0-2.1-0.9t-0.8-2v-28.5q0-1.2 0.8-2t2.1-0.9h2.8v-2.1q0-1.5 1.1-2.6t2.5-1h1.4q1.5 0 2.5 1.1t1.1 2.5v2.1h8.6v-2.1q0-1.5 1-2.6t2.5-1h1.5q1.4 0 2.5 1.1t1 2.5v2.1h2.9q1.1 0 2 0.9t0.8 2z"></path></g></svg><span>2013/06/20 09:00</span></div><div class="meta"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m9.5 10.5q0-1.2-0.8-1.9t-1.9-0.8-1.9 0.8-0.8 1.9 0.8 1.9 1.9 0.8 1.9-0.8 0.8-1.9z m22.7 12.2q0 1.1-0.8 1.9l-10.4 10.5q-0.8 0.8-2 0.8-1.1 0-1.9-0.8l-15.2-15.2q-0.8-0.8-1.3-2.2t-0.6-2.5v-8.8q0-1.1 0.8-1.9t1.9-0.8h8.9q1.1 0 2.5 0.5t2.1 1.4l15.2 15.2q0.8 0.8 0.8 1.9z m8.2 0q0 1.1-0.8 1.9l-10.5 10.5q-0.8 0.8-1.9 0.8-0.8 0-1.2-0.3t-1.2-1l10-10q0.8-0.8 0.8-1.9 0-1.1-0.8-1.9l-15.2-15.2q-0.8-0.8-2.1-1.4t-2.5-0.5h4.7q1.2 0 2.5 0.5t2.2 1.4l15.2 15.2q0.8 0.8 0.8 1.9z"></path></g></svg><ul class="tags"><a href="https://blog.bakunyo.com/tags/linux/"><li>linux</li></a></ul></div></div></div><div class="socialButtons"><div class="twitter__Styles-ixfWcN hPFOEi"><a class="button" href="#"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z"></path></g></svg>Tweet</a></div><a href="httpb.hatena.ne.jp/entry/httpblog.bakunyo.com/2013/06/20/crontab" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-large" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border:none"/></a><a data-pocket-label="pocket" data-pocket-count="vertical" class="pocket-btn" data-lang="ja"></a></div><div class="postContent"><p><span itemscope="" itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/b/bakunyo/20130620/20130620214241.jpg" alt="f:id:bakunyo:20130620214241j:plain" title="f:id:bakunyo:20130620214241j:plain"></span></p>
<p><a href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>で定期的にコマンドを実行してくれる<span style="color: #ff0000"><strong>crontab</strong></span>の使い方をまとめてみました。</p>
<h2>まずはcrondが起動しているか確認</h2>
<p>デフォルトでは自動起動のはずですが、念の為crondが起動しているかを確認しておきましょう。<br>
ここで起動していなければ、その後の設定をいくらしても動いてくれることはありません:D</p>
<pre class="code" data-unlink="">
# /etc/rc.d/init.d/crond status
crond (pid  xxxx) を実行中...     // ちゃんと起動していますね！
</pre>
<h2>crontabファイルの設定</h2>
<p>crondが起動していることを確認できたら、crontabファイルの設定です。<br>
crontabファイルには「<strong><span style="color: #ff0000">この日付のこの時刻にこのコマンドを実行せよ</span></strong>」という命令が書き込まれています。<br>
crontabファイルは<code>/var/spool/cron/user</code>(ユーザー毎)に保存されていますが、<strong>基本的にcrontabファイルは直接編集せず、</strong><code>crontab</code>コマンドを使って編集するのが習わしです。<br>
以下はcrontabコマンドの説明です。</p>
<h4>crontabコマンド</h4>
<pre class="code" data-unlink="">
crontab [-u user] file
　または
crontab [-u user] [-e | -l | -r | -i]
</pre>
<h4>各オプションの説明</h4>
<table>
<thead>
<tr>
<th>オプション</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>u</td>
<td>userに対象となるユーザーを指定</td>
</tr>
<tr>
<td>e</td>
<td>エディタを起動し、crontabの内容を編集する</td>
</tr>
<tr>
<td>l</td>
<td>現在登録されている内容を表示する</td>
</tr>
<tr>
<td>r</td>
<td>現在登録されている内容を削除する</td>
</tr>
<tr>
<td>i</td>
<td>(rと併用して)削除する前に確認プロンプトを表示</td>
</tr>
</tbody>
</table>
<p>オプションでeを指定しようとしたら間違えてrを押してしまい、設定が全て削除されてしまった悲しい事例が各所で報告されています。</p>
<hr>
<p><a href="http://blog.cles.jp/item/3303">crontab -r とやってしまった時の対処法</a><a href="http://b.hatena.ne.jp/entry/http://blog.cles.jp/item/3303"><img src="http://b.hatena.ne.jp/entry/image/http://blog.cles.jp/item/3303" alt=""></a><br>
<a href="http://blog.kentarok.org/entry/20061030/1162206137">crontab -r を安全にする - delirious thoughts</a><a href="http://b.hatena.ne.jp/entry/http://blog.kentarok.org/entry/20061030/1162206137"><img src="http://b.hatena.ne.jp/entry/image/http://blog.kentarok.org/entry/20061030/1162206137" alt=""></a></p>
<hr>
<p>誤って削除してしまわないよう、eオプションは使わずに<strong>別ファイルにて管理した方が望ましい</strong>ようです。<br>
現在eオプションのみで管理しているなら、lオプションをリダイレクトして別ファイルに書き出しておきましょう。</p>
<pre class="code" data-unlink="">
# crontab -u user -l > ~/crontab.bk
</pre>
<h2>crontabファイルの書き方</h2>
<p>それではメインの、crontabファイルの書き方についてです。<br>
「<span style="color: #ff0000"><strong>この日付のこの時刻にこのコマンドを実行せよ</strong></span>」という命令を記述するために、以下の書式を用います。</p>
<pre class="code" data-unlink="">
分　時　日　月　曜日　＜コマンド＞
</pre>
<p>日付・時刻を表す5つのフィールドには、以下の値を設定できます。</p>
<table>
<thead>
<tr>
<th>フィールド</th>
<th>取りうる値</th>
</tr>
</thead>
<tbody>
<tr>
<td>分</td>
<td>0~59</td>
</tr>
<tr>
<td>時</td>
<td>0~23</td>
</tr>
<tr>
<td>日</td>
<td>1~31</td>
</tr>
<tr>
<td>月</td>
<td>1~12</td>
</tr>
<tr>
<td>曜日</td>
<td>0~7 (0と7が日曜日)</td>
</tr>
</tbody>
</table>
<h4>範囲指定</h4>
<p>各フィールドは<span style="color: #ff0000"><strong>-(ハイフン)</strong></span>でつなげて範囲指定することができます。<br>
以降、分フィールドを書き方の例として挙げていきます。</p>
<pre class="code" data-unlink="">
5-10    // 5分・6分・7分・8分・9分・10分に実行
</pre>
<p>このように、<code>5-10</code>と範囲指定することで5分~10分の間に毎分コマンドが実行されます。<br>
全範囲（分フィールドだと0~59）を範囲指定したい場合には<span style="color: #ff0000"><strong>*(アスタリスク)</strong></span>を使用します。</p>
<pre class="code" data-unlink="">
*   // 毎分実行
</pre>
<h4>リスト指定</h4>
<p>不連続な複数の値を指定したい時は、<span style="color: #ff0000"><strong>,(カンマ)</strong></span>で区切ってリスト指定することができます。</p>
<pre class="code" data-unlink="">
1,3,5   // 1分・3分・5分に実行
</pre>
<p>リスト指定の中に範囲指定を含めることも可能です。</p>
<pre class="code" data-unlink="">
1,3,5-10   // 1分・3分・5分・6分・7分・8分・9分・10分に実行
</pre>
<h4>間隔値指定</h4>
<p>「◯分間隔」などとしたい場合は、範囲指定と併せて間隔値を指定することができます。<br>
範囲指定の後に<span style="color: #ff0000"><strong>/(スラッシュ)</strong></span>をつづけ、その後に間隔値を指定します。</p>
<pre class="code" data-unlink="">
5-10/2   // 5分・7分・9分(5分~10分の間の2分間隔)に実行
*/5   // 5分おきに実行
</pre>
<h4>設定例</h4>
<p>これらの書き方を組み合わせて、「<span style="color: #ff0000"><strong>この日付のこの時刻に</strong></span>」の部分を指定します。<br>
以下、設定例です。<br>
ここでは仮に、usr/bin/cmdをコマンドとして実行するとします。</p>
<pre class="code" data-unlink="">
00 14 * * * /usr/bin/cmd      // 毎日14:00に実行
* * * * * /usr/bin/cmd        // 毎分実行
15,30 06 * * 2 /usr/bin/cmd   // 毎週火曜日の6:15と6:30に実行
05 23 * 3-5 4 /usr/bin/cmd    // 3~5月の毎週木曜日23:05に実行
</pre>
<p>といった具合です。</p>
<h4>ちょっと細かい話。</h4>
<p>cronは毎分このcrontabファイルをチェックし、**<span style="color: #ff0000">分・時・月が現在時刻と一致し、かつ日と曜日フィールドの2つのいずれかが現在時刻と一致すれば</span>**コマンドを実行します。<br>
この部分が少しややこしいのですが、cronは日フィールドと曜日フィールドの2つと見比べてコマンド実行するかを判断します。なので、この２つに関しては少し見方を変えてあげます。<br>
具体的には、日フィールドと曜日フィールドのそれぞれにおいて、<em>(アスタリスク)と</em>以外を指定した場合のどのような指定になるかを分けるとわかりやすいです。</p>
<pre><code>   | 日が*           | 日が*以外       
</code></pre>
<p>------ | ------------- | ------------<br>
曜日が*   | 毎日            | 日フィールドで指定した日<br>
曜日が*以外 | 曜日フィールドで指定した日 | いずれかに当てはまる日</p>
<p>設定例を以下に挙げます。</p>
<pre class="code" data-unlink="">
00 14 * * * /usr/bin/cmd         // 毎日14:00に実行
00 14 1,5 * * /usr/bin/cmd     // 毎月1日,5日の14:00に実行
00 14 * * 4 /usr/bin/cmd        // 毎週木曜日14:00に実行
00 14 1,5 * 4 /usr/bin/cmd    // 毎月1日,5日と毎週木曜日14:00に実行
</pre>
<p>といった感じになります。</p>
<p>他にも書くべきこととして**<a href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>の指定**などがあるのですが、疲れたのでここまで。</p>
</div><div class="socialButtons"><div class="twitter__Styles-ixfWcN hPFOEi"><a class="button" href="#"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z"></path></g></svg>Tweet</a></div><a href="httpb.hatena.ne.jp/entry/httpblog.bakunyo.com/2013/06/20/crontab" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-large" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border:none"/></a><a data-pocket-label="pocket" data-pocket-count="vertical" class="pocket-btn" data-lang="ja"></a></div></main><div class="styles-fIyXIQ fnLceh"></div></div><div class="Footer__Styles-fSAnuS kLFjEU"><footer><nav><section class="profile"><h3>Profile</h3><div class="self"><img src="/static/bakunyo.7b427fa6.png" alt="bakunyo"/><p><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle"><g><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z"></path></g></svg> <a href="https://twitter.com/bakunyo">@bakunyo</a><br/><br/><span>フリーランスのWEBエンジニアで普段は Rails / React / TypeScript あたりを書いてます。 お仕事の話あれば気軽に連絡ください。<a target="_blank" href="https://xn--0st94o12a.jp/">最新巻.jp</a> <!-- -->運営中。亀戸に在住。</span></p></div><div class="feedly"><a href="https://feedly.com/i/subscription/feed/https://blog.bakunyo.com/rss" target="blank"><img id="feedlyFollow" src="https://s3.feedly.com/img/follows/feedly-follow-rectangle-flat-big_2x.png" alt="follow us in feedly" width="131" height="56"/></a></div></section><section class="links"><h3>Tags</h3><ul class="tags"><a href="https://blog.bakunyo.com/tags/amp/"><li>amp</li></a><a href="https://blog.bakunyo.com/tags/architecture/"><li>architecture</li></a><a href="https://blog.bakunyo.com/tags/aws/"><li>aws</li></a><a href="https://blog.bakunyo.com/tags/blog/"><li>blog</li></a><a href="https://blog.bakunyo.com/tags/css/"><li>css</li></a><a href="https://blog.bakunyo.com/tags/deeplearning/"><li>deeplearning</li></a><a href="https://blog.bakunyo.com/tags/devise/"><li>devise</li></a><a href="https://blog.bakunyo.com/tags/docker/"><li>docker</li></a><a href="https://blog.bakunyo.com/tags/elixir/"><li>elixir</li></a><a href="https://blog.bakunyo.com/tags/encoding/"><li>encoding</li></a><a href="https://blog.bakunyo.com/tags/erlang/"><li>erlang</li></a><a href="https://blog.bakunyo.com/tags/git/"><li>git</li></a><a href="https://blog.bakunyo.com/tags/github/"><li>github</li></a><a href="https://blog.bakunyo.com/tags/golang/"><li>golang</li></a><a href="https://blog.bakunyo.com/tags/java/"><li>java</li></a><a href="https://blog.bakunyo.com/tags/javascript/"><li>javascript</li></a><a href="https://blog.bakunyo.com/tags/jekyll/"><li>jekyll</li></a><a href="https://blog.bakunyo.com/tags/jquery/"><li>jquery</li></a><a href="https://blog.bakunyo.com/tags/linux/"><li>linux</li></a><a href="https://blog.bakunyo.com/tags/lt/"><li>lt</li></a><a href="https://blog.bakunyo.com/tags/matome/"><li>matome</li></a><a href="https://blog.bakunyo.com/tags/middleman/"><li>middleman</li></a><a href="https://blog.bakunyo.com/tags/php/"><li>php</li></a><a href="https://blog.bakunyo.com/tags/python/"><li>python</li></a><a href="https://blog.bakunyo.com/tags/rails/"><li>rails</li></a><a href="https://blog.bakunyo.com/tags/rake/"><li>rake</li></a><a href="https://blog.bakunyo.com/tags/react-static/"><li>react-static</li></a><a href="https://blog.bakunyo.com/tags/react/"><li>react</li></a><a href="https://blog.bakunyo.com/tags/reading/"><li>reading</li></a><a href="https://blog.bakunyo.com/tags/redux/"><li>redux</li></a><a href="https://blog.bakunyo.com/tags/regex/"><li>regex</li></a><a href="https://blog.bakunyo.com/tags/relay/"><li>relay</li></a><a href="https://blog.bakunyo.com/tags/rspec/"><li>rspec</li></a><a href="https://blog.bakunyo.com/tags/ruby/"><li>ruby</li></a><a href="https://blog.bakunyo.com/tags/security/"><li>security</li></a><a href="https://blog.bakunyo.com/tags/service/"><li>service</li></a><a href="https://blog.bakunyo.com/tags/sql/"><li>sql</li></a><a href="https://blog.bakunyo.com/tags/sublime_text/"><li>sublime_text</li></a><a href="https://blog.bakunyo.com/tags/tensorflow/"><li>tensorflow</li></a><a href="https://blog.bakunyo.com/tags/test/"><li>test</li></a><a href="https://blog.bakunyo.com/tags/troll/"><li>troll</li></a><a href="https://blog.bakunyo.com/tags/vim/"><li>vim</li></a><a href="https://blog.bakunyo.com/tags/vpc/"><li>vpc</li></a><a href="https://blog.bakunyo.com/tags/windows/"><li>windows</li></a></ul></section></nav><small class="footerSmalls"><a href="https://twitter.com/bakunyo">@bakunyo</a><span>© 2013 - <!-- -->2019<!-- --> </span><a href="https://blog.bakunyo.com/privacy/">プライバシーポリシー</a></small></footer></div></div></div><link rel="stylesheet" href="https://blog.bakunyo.com/highlight/vs2015.css"/><script type="text/javascript">
                window.__routeData = {"path":"/2013/06/20/crontab","propsMap":{"__local":"iG1Hd"},"initialProps":{"post":{"id":17,"path":"/2013/06/20/crontab/","date":"2013/06/20 09:00","title":"crontab使い方まとめ。","tags":["linux"],"body":"<p><span itemscope=\"\" itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/b/bakunyo/20130620/20130620214241.jpg\" alt=\"f:id:bakunyo:20130620214241j:plain\" title=\"f:id:bakunyo:20130620214241j:plain\"></span></p>\n<p><a href=\"http://d.hatena.ne.jp/keyword/Linux\">Linux</a>で定期的にコマンドを実行してくれる<span style=\"color: #ff0000\"><strong>crontab</strong></span>の使い方をまとめてみました。</p>\n<h2>まずはcrondが起動しているか確認</h2>\n<p>デフォルトでは自動起動のはずですが、念の為crondが起動しているかを確認しておきましょう。<br>\nここで起動していなければ、その後の設定をいくらしても動いてくれることはありません:D</p>\n<pre class=\"code\" data-unlink=\"\">\n# /etc/rc.d/init.d/crond status\ncrond (pid  xxxx) を実行中...     // ちゃんと起動していますね！\n</pre>\n<h2>crontabファイルの設定</h2>\n<p>crondが起動していることを確認できたら、crontabファイルの設定です。<br>\ncrontabファイルには「<strong><span style=\"color: #ff0000\">この日付のこの時刻にこのコマンドを実行せよ</span></strong>」という命令が書き込まれています。<br>\ncrontabファイルは<code>/var/spool/cron/user</code>(ユーザー毎)に保存されていますが、<strong>基本的にcrontabファイルは直接編集せず、</strong><code>crontab</code>コマンドを使って編集するのが習わしです。<br>\n以下はcrontabコマンドの説明です。</p>\n<h4>crontabコマンド</h4>\n<pre class=\"code\" data-unlink=\"\">\ncrontab [-u user] file\n　または\ncrontab [-u user] [-e | -l | -r | -i]\n</pre>\n<h4>各オプションの説明</h4>\n<table>\n<thead>\n<tr>\n<th>オプション</th>\n<th>内容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>u</td>\n<td>userに対象となるユーザーを指定</td>\n</tr>\n<tr>\n<td>e</td>\n<td>エディタを起動し、crontabの内容を編集する</td>\n</tr>\n<tr>\n<td>l</td>\n<td>現在登録されている内容を表示する</td>\n</tr>\n<tr>\n<td>r</td>\n<td>現在登録されている内容を削除する</td>\n</tr>\n<tr>\n<td>i</td>\n<td>(rと併用して)削除する前に確認プロンプトを表示</td>\n</tr>\n</tbody>\n</table>\n<p>オプションでeを指定しようとしたら間違えてrを押してしまい、設定が全て削除されてしまった悲しい事例が各所で報告されています。</p>\n<hr>\n<p><a href=\"http://blog.cles.jp/item/3303\">crontab -r とやってしまった時の対処法</a><a href=\"http://b.hatena.ne.jp/entry/http://blog.cles.jp/item/3303\"><img src=\"http://b.hatena.ne.jp/entry/image/http://blog.cles.jp/item/3303\" alt=\"\"></a><br>\n<a href=\"http://blog.kentarok.org/entry/20061030/1162206137\">crontab -r を安全にする - delirious thoughts</a><a href=\"http://b.hatena.ne.jp/entry/http://blog.kentarok.org/entry/20061030/1162206137\"><img src=\"http://b.hatena.ne.jp/entry/image/http://blog.kentarok.org/entry/20061030/1162206137\" alt=\"\"></a></p>\n<hr>\n<p>誤って削除してしまわないよう、eオプションは使わずに<strong>別ファイルにて管理した方が望ましい</strong>ようです。<br>\n現在eオプションのみで管理しているなら、lオプションをリダイレクトして別ファイルに書き出しておきましょう。</p>\n<pre class=\"code\" data-unlink=\"\">\n# crontab -u user -l > ~/crontab.bk\n</pre>\n<h2>crontabファイルの書き方</h2>\n<p>それではメインの、crontabファイルの書き方についてです。<br>\n「<span style=\"color: #ff0000\"><strong>この日付のこの時刻にこのコマンドを実行せよ</strong></span>」という命令を記述するために、以下の書式を用います。</p>\n<pre class=\"code\" data-unlink=\"\">\n分　時　日　月　曜日　＜コマンド＞\n</pre>\n<p>日付・時刻を表す5つのフィールドには、以下の値を設定できます。</p>\n<table>\n<thead>\n<tr>\n<th>フィールド</th>\n<th>取りうる値</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>分</td>\n<td>0~59</td>\n</tr>\n<tr>\n<td>時</td>\n<td>0~23</td>\n</tr>\n<tr>\n<td>日</td>\n<td>1~31</td>\n</tr>\n<tr>\n<td>月</td>\n<td>1~12</td>\n</tr>\n<tr>\n<td>曜日</td>\n<td>0~7 (0と7が日曜日)</td>\n</tr>\n</tbody>\n</table>\n<h4>範囲指定</h4>\n<p>各フィールドは<span style=\"color: #ff0000\"><strong>-(ハイフン)</strong></span>でつなげて範囲指定することができます。<br>\n以降、分フィールドを書き方の例として挙げていきます。</p>\n<pre class=\"code\" data-unlink=\"\">\n5-10    // 5分・6分・7分・8分・9分・10分に実行\n</pre>\n<p>このように、<code>5-10</code>と範囲指定することで5分~10分の間に毎分コマンドが実行されます。<br>\n全範囲（分フィールドだと0~59）を範囲指定したい場合には<span style=\"color: #ff0000\"><strong>*(アスタリスク)</strong></span>を使用します。</p>\n<pre class=\"code\" data-unlink=\"\">\n*   // 毎分実行\n</pre>\n<h4>リスト指定</h4>\n<p>不連続な複数の値を指定したい時は、<span style=\"color: #ff0000\"><strong>,(カンマ)</strong></span>で区切ってリスト指定することができます。</p>\n<pre class=\"code\" data-unlink=\"\">\n1,3,5   // 1分・3分・5分に実行\n</pre>\n<p>リスト指定の中に範囲指定を含めることも可能です。</p>\n<pre class=\"code\" data-unlink=\"\">\n1,3,5-10   // 1分・3分・5分・6分・7分・8分・9分・10分に実行\n</pre>\n<h4>間隔値指定</h4>\n<p>「◯分間隔」などとしたい場合は、範囲指定と併せて間隔値を指定することができます。<br>\n範囲指定の後に<span style=\"color: #ff0000\"><strong>/(スラッシュ)</strong></span>をつづけ、その後に間隔値を指定します。</p>\n<pre class=\"code\" data-unlink=\"\">\n5-10/2   // 5分・7分・9分(5分~10分の間の2分間隔)に実行\n*/5   // 5分おきに実行\n</pre>\n<h4>設定例</h4>\n<p>これらの書き方を組み合わせて、「<span style=\"color: #ff0000\"><strong>この日付のこの時刻に</strong></span>」の部分を指定します。<br>\n以下、設定例です。<br>\nここでは仮に、usr/bin/cmdをコマンドとして実行するとします。</p>\n<pre class=\"code\" data-unlink=\"\">\n00 14 * * * /usr/bin/cmd      // 毎日14:00に実行\n* * * * * /usr/bin/cmd        // 毎分実行\n15,30 06 * * 2 /usr/bin/cmd   // 毎週火曜日の6:15と6:30に実行\n05 23 * 3-5 4 /usr/bin/cmd    // 3~5月の毎週木曜日23:05に実行\n</pre>\n<p>といった具合です。</p>\n<h4>ちょっと細かい話。</h4>\n<p>cronは毎分このcrontabファイルをチェックし、**<span style=\"color: #ff0000\">分・時・月が現在時刻と一致し、かつ日と曜日フィールドの2つのいずれかが現在時刻と一致すれば</span>**コマンドを実行します。<br>\nこの部分が少しややこしいのですが、cronは日フィールドと曜日フィールドの2つと見比べてコマンド実行するかを判断します。なので、この２つに関しては少し見方を変えてあげます。<br>\n具体的には、日フィールドと曜日フィールドのそれぞれにおいて、<em>(アスタリスク)と</em>以外を指定した場合のどのような指定になるかを分けるとわかりやすいです。</p>\n<pre><code>   | 日が*           | 日が*以外       \n</code></pre>\n<p>------ | ------------- | ------------<br>\n曜日が*   | 毎日            | 日フィールドで指定した日<br>\n曜日が*以外 | 曜日フィールドで指定した日 | いずれかに当てはまる日</p>\n<p>設定例を以下に挙げます。</p>\n<pre class=\"code\" data-unlink=\"\">\n00 14 * * * /usr/bin/cmd         // 毎日14:00に実行\n00 14 1,5 * * /usr/bin/cmd     // 毎月1日,5日の14:00に実行\n00 14 * * 4 /usr/bin/cmd        // 毎週木曜日14:00に実行\n00 14 1,5 * 4 /usr/bin/cmd    // 毎月1日,5日と毎週木曜日14:00に実行\n</pre>\n<p>といった感じになります。</p>\n<p>他にも書くべきこととして**<a href=\"http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4\">環境変数</a>の指定**などがあるのですが、疲れたのでここまで。</p>\n"}},"siteProps":{"tagNames":["amp","architecture","aws","blog","css","deeplearning","devise","docker","elixir","encoding","erlang","git","github","golang","java","javascript","jekyll","jquery","linux","lt","matome","middleman","php","python","rails","rake","react-static","react","reading","redux","regex","relay","rspec","ruby","security","service","sql","sublime_text","tensorflow","test","troll","vim","vpc","windows"]}};</script><script async="" src="/app.7a148b59.js"></script></body></html>