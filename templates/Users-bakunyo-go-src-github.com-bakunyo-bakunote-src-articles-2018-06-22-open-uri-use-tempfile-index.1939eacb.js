(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{92:function(e,a,n){"use strict";n.r(a);var t=n(0),p=n.n(t),s=n(22),r=n.n(s),c=n(62),l=n.n(c),o=n(193),m={},i="wrapper";function b(e){var a=e.components,n=l()(e,["components"]);return Object(o.a)(i,r()({},m,n,{components:a,mdxType:"MDXLayout"}),Object(o.a)("p",null,Object(o.a)("a",r()({parentName:"p"},{href:"https://docs.ruby-lang.org/ja/latest/library/open=2duri.html"}),"open-uri"),"のドキュメントより、"),Object(o.a)("blockquote",null,Object(o.a)("p",{parentName:"blockquote"},"開いたファイルオブジェクトは StringIO もしくは Tempfile ですが")),Object(o.a)("p",null,"とある。\n取得したファイルサイズによって返るオブジェクトの型が変わるらしい。"),Object(o.a)("p",null,"常に ",Object(o.a)("inlineCode",{parentName:"p"},"Tempfile")," を取得したかったので、以下のようにブロックの中で ",Object(o.a)("inlineCode",{parentName:"p"},"Tempfile")," を作って対応した。"),Object(o.a)("pre",null,Object(o.a)("code",r()({parentName:"pre"},{className:"hljs language-ruby"}),Object(o.a)("span",r()({parentName:"code"},{className:"hljs-keyword"}),"require")," ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-string"}),"'open-uri'"),"\n\nopen(url) ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-keyword"}),"do")," ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-params"}),"|f|"),"\n  Tempfile.open ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-keyword"}),"do")," ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-params"}),"|tmp|"),"\n    tmp.binmode\n    tmp.write f.read\n    tmp.rewind\n\n    ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-comment"}),"# tmp を使う"),"\n  ",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-keyword"}),"end"),"\n",Object(o.a)("span",r()({parentName:"code"},{className:"hljs-keyword"}),"end"))),Object(o.a)("h3",null,"参考"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("a",r()({parentName:"li"},{href:"https://stackoverflow.com/questions/10496874/why-does-openuri-treat-files-under-10kb-in-size-as-stringio"}),"Why does OpenURI treat files under 10kb in size as StringIO?")),Object(o.a)("li",{parentName:"ul"},Object(o.a)("a",r()({parentName:"li"},{href:"https://qiita.com/pujyo3/items/96c680a156405b8cd442"}),"Rubyのopen_uriでファイルオブジェクトがTempfileになる瞬間を追った"))))}b.isMDXComponent=!0;var j=n(194);a.default=function(){return p.a.createElement(j.a,null,p.a.createElement(b,null))}}}]);