{"post":{"id":34,"path":"/2015/12/27/git-delete-merged/","date":"2015/12/27 09:00","title":"マージ済ブランチを消すコマンドをつくった","tags":["git"],"body":"<p>今までマージ済ブランチを消す時、<code>git branch --merged</code>してから1個1個<code>git branch -d xxxx</code>とか面倒くさいことしてたので、マージ済ブランチを表示して確認後にyesと打てばまとめて消せるようにした。<br>\n但し、originとdevelopは消さないようにしてる。</p>\n<pre><code class=\"hljs bash\"><span class=\"hljs-keyword\">function</span> git-delete-<span class=\"hljs-function\"><span class=\"hljs-title\">merged</span></span>() {\n  merged=`git branch --merged | egrep -v <span class=\"hljs-string\">'\\*|develop|master'</span>`\n  <span class=\"hljs-keyword\">if</span> [[ <span class=\"hljs-variable\">$merged</span> = <span class=\"hljs-string\">\"\"</span> ]]; <span class=\"hljs-keyword\">then</span>\n    <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">'No merged branch.'</span>\n    <span class=\"hljs-built_in\">return</span> 0\n  <span class=\"hljs-keyword\">fi</span>\n\n  <span class=\"hljs-built_in\">echo</span> -en <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$merged</span>\\\\ndelete? (y)es/(n)o: \"</span>\n  <span class=\"hljs-built_in\">read</span> ans\n\n  <span class=\"hljs-keyword\">if</span> [[ <span class=\"hljs-variable\">$ans</span> =~ ^y(es)?$ ]]; <span class=\"hljs-keyword\">then</span>\n    <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$merged</span>\"</span> | xargs git branch -d\n  <span class=\"hljs-keyword\">else</span>\n    <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">'Cancelled.'</span>\n  <span class=\"hljs-keyword\">fi</span>\n}\n\n<span class=\"hljs-built_in\">alias</span> gdm=<span class=\"hljs-string\">'git-delete-merged'</span>\n</code></pre>\n<h4>参考</h4>\n<p><a href=\"http://qiita.com/hajimeni/items/73d2155fc59e152630c4\">Gitでマージ済みブランチを一括削除</a></p>\n<h1>ついでに</h1>\n<p>今までGitのサブコマンドは<code>gitconfig</code>のaliasに定義してたけど、<code>git xx</code>って打つのもちょっと手間なのでalias整理した！</p>\n<pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">alias</span> ga=<span class=\"hljs-string\">'git add'</span>\n<span class=\"hljs-built_in\">alias</span> gap=<span class=\"hljs-string\">'git add -p'</span>\n<span class=\"hljs-built_in\">alias</span> gb=<span class=\"hljs-string\">'git branch'</span>\n<span class=\"hljs-built_in\">alias</span> gcm=<span class=\"hljs-string\">'git commit -v'</span>\n<span class=\"hljs-built_in\">alias</span> gca=<span class=\"hljs-string\">'git commit --amend'</span>\n<span class=\"hljs-built_in\">alias</span> gco=<span class=\"hljs-string\">'git checkout'</span>\n<span class=\"hljs-built_in\">alias</span> gcof=<span class=\"hljs-string\">'git-checkout-force'</span>\n<span class=\"hljs-built_in\">alias</span> gcp=<span class=\"hljs-string\">'git cherry-pick'</span>\n<span class=\"hljs-built_in\">alias</span> gd=<span class=\"hljs-string\">'git diff'</span>\n<span class=\"hljs-built_in\">alias</span> gdm=<span class=\"hljs-string\">'git-delete-merged'</span>\n<span class=\"hljs-built_in\">alias</span> gl=<span class=\"hljs-string\">\"git log --pretty='%h %ci %s %cn'\"</span>\n<span class=\"hljs-built_in\">alias</span> gpl=<span class=\"hljs-string\">'git pull'</span>\n<span class=\"hljs-built_in\">alias</span> grb=<span class=\"hljs-string\">'git rabase'</span>\n<span class=\"hljs-built_in\">alias</span> grbi=<span class=\"hljs-string\">'git rabse -i'</span>\n<span class=\"hljs-built_in\">alias</span> grba=<span class=\"hljs-string\">'git rabse --abort'</span>\n<span class=\"hljs-built_in\">alias</span> grbc=<span class=\"hljs-string\">'git rabse --continue'</span>\n<span class=\"hljs-keyword\">for</span> n <span class=\"hljs-keyword\">in</span> $(seq 10); <span class=\"hljs-keyword\">do</span>\n  <span class=\"hljs-built_in\">alias</span> grbi<span class=\"hljs-variable\">$n</span>=<span class=\"hljs-string\">\"git rebase -i HEAD~<span class=\"hljs-variable\">$n</span>\"</span>\n<span class=\"hljs-keyword\">done</span>\n<span class=\"hljs-built_in\">alias</span> grs=<span class=\"hljs-string\">'git reset'</span>\n<span class=\"hljs-keyword\">for</span> n <span class=\"hljs-keyword\">in</span> $(seq 10); <span class=\"hljs-keyword\">do</span>\n  <span class=\"hljs-built_in\">alias</span> grs<span class=\"hljs-variable\">$n</span>=<span class=\"hljs-string\">\"git reset HEAD~<span class=\"hljs-variable\">$n</span>\"</span>\n<span class=\"hljs-keyword\">done</span>\n<span class=\"hljs-built_in\">alias</span> gs=<span class=\"hljs-string\">'git status'</span>\n<span class=\"hljs-built_in\">alias</span> gps=<span class=\"hljs-string\">'git push'</span>\n</code></pre>\n<p>まだ慣れてなくてすぐ<code>git</code>って打っちゃうので、早く身体に覚えさせたい。</p>\n<h4>参考</h4>\n<p><a href=\"http://blog.enogineer.com/2014/12/04/git-ranking/\">よく使うGitコマンドのエイリアス＆シェル関数トップ10+α</a></p>\n"}}