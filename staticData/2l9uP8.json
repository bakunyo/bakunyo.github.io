{"post":{"id":32,"path":"/2015/05/04/rubygem_global/","date":"2015/05/04 16:32","title":"Global変数を管理するGem 'global'","tags":["ruby"],"body":"<p>業務で使ってるGem「<strong>global</strong>」がかなり便利だったのでメモしておく。</p>\n<p><a href=\"https://github.com/railsware/global\">https://github.com/railsware/global</a></p>\n<h2>導入手順(Railsの場合)</h2>\n<h3>1.Gemfileに追加</h3>\n<pre><code class=\"hljs ruby\">gem <span class=\"hljs-string\">'global'</span>\n</code></pre>\n<h3>2.initiallizersに追加</h3>\n<p>config/initializers/global.rb</p>\n<pre><code class=\"hljs ruby\">Global.configure <span class=\"hljs-keyword\">do</span> <span class=\"hljs-params\">|config|</span>\n  config.environment = Rails.env.to_s\n  config.config_directory = Rails.root.join(<span class=\"hljs-string\">'config/global'</span>).to_s\n<span class=\"hljs-keyword\">end</span>\n</code></pre>\n<p>ここまでやれば、<code>config/global/xxxx.yml</code>にファイルを置くと設定値を読んでくれる</p>\n<pre><code class=\"hljs yaml\"><span class=\"hljs-comment\"># yamlファイルの例</span>\n<span class=\"hljs-attr\">default:</span>\n<span class=\"hljs-attr\">  error-email:</span> <span class=\"hljs-string\">myname@example.com</span>\n<span class=\"hljs-attr\">production:</span>\n<span class=\"hljs-attr\">  error-email:</span> <span class=\"hljs-string\">error@example.com</span>\n</code></pre>\n<p>変数へのアクセス方法</p>\n<pre><code class=\"hljs ruby\">Global.error-email <span class=\"hljs-comment\"># 環境によって適切な方にアクセス</span>\n</code></pre>\n<h3>さらに</h3>\n<p>階層を深くするには、単にyamlの階層を深くするか<br>\n<code>config/global/xxxx/yyyy.yml</code><br>\nのようにファイルパスを深くすれば期待通りに動いてくれる。</p>\n<p>便利！</p>\n"}}