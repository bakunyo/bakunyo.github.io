{"post":{"id":8,"path":"/2013/04/03/cakephp_charcode/","date":"2013/04/03 09:00","title":"CakePHPでメールを送ったら文字化けした時の対処法。","tags":["php","encoding"],"body":"<h3>[環境]</h3>\n<p><a href=\"http://d.hatena.ne.jp/keyword/CakePHP\">CakePHP</a> 1.3</p>\n<h3>[状況]</h3>\n<p>Email<a href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8\">コンポーネント</a>を使用して、テンプレートを使用せずにシンプルなテキストでメールを送信したら文字化けが発生。</p>\n<h3>[対処]</h3>\n<p>まずは<a href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\">文字コード</a>のセットを<a href=\"http://d.hatena.ne.jp/keyword/UTF-8\">UTF-8</a>に設定。</p>\n<p><code>$this-&gt;Email-&gt;charset = 'utf-8';</code></p>\n<p>これでも、一部直らない部分がある。</p>\n<p>どうやら、1行の文字数が長い時に自動改行され、そこで文字化けが発生するらしい。</p>\n<p>自動改行されない位に1行の文字数をそもそも長くしておく。</p>\n<p><code>$this-&gt;Email-&gt;lineLength = 1024;</code></p>\n<p>これで解決しました。</p>\n<h3>[参考記事]</h3>\n<p><a href=\"http://d.hatena.ne.jp/s-yo-ko/20101116\">http://d.hatena.ne.jp/s-yo-ko/20101116</a></p>\n"}}